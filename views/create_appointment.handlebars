<style media="screen">
  button {
    margin-left: 50pt;
    margin-top: 50pt;
  }

</style>
<script type="text/javascript">
  $(function() {



    $("#confirm").on('click', function() {
      var urlParams = new URLSearchParams(window.location.search);
      // Have to use schedule_id don't know why its being stupid
      var description = urlParams.get('schedule_id').substring(12); //course code, course description
      var title = urlParams.get('title'); // FirstName, LastName
      var date = formatDate(urlParams.get('start').slice(0, 15))
      var start = urlParams.get('start').slice(16, 24);
      var end = urlParams.get('end').slice(16, 24);

      var data = {
        // student_id: req.session.id, // can get in back end
        tutor_id: title, // using name now to find our tutor id
        date: date,
        start_time: start,
        end_time: end,
        course: description.slice(0,8)
      };
      $.ajax({
        type: 'post',
        url: 'confirm_appointments',
        data: data,
        success: function(data) {
          console.log(data, "we can move them to new page now!");
          location.assign("tutor_view");
        },
        error: function() {
          console.log("Error");
        }
        });
      });

    $("#cancel").on('click', function() {
      location.assign("schedule");
    });

    function formatDate(date) {
      var d = new Date(date);
      var month = '' + (d.getMonth() + 1);
      var day = '' + d.getDate();
      var year = d.getFullYear();

      if (month.length < 2) month = '0' + month;
      if (day.length < 2) day = '0' + day;

      return [year, month, day].join('-');
    }
  });

</script>


<div class="container-fluid">
  <button id="cancel" type="button" class="btn btn-danger">Go Back</button>
  <button id="confirm" type="button" class="btn btn-primary">Confirm Appointment</button>
</div>
